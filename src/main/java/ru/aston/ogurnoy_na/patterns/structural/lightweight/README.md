# –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–õ–µ–≥–∫–æ–≤–µ—Å" (Flyweight)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–∞—Ç—Ç–µ—Ä–Ω **Flyweight** –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Ä–∞–∑–¥–µ–ª—è—è –æ–±—â–∏–µ —á–∞—Å—Ç–∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∑–∞ —Å—á–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
1. **Flyweight** (`TreeType`):
    - –°–æ–¥–µ—Ä–∂–∏—Ç **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ)
2. **ConcreteFlyweight**:
    - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Flyweight (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤)
3. **FlyweightFactory** (`TreeFactory`):
    - –°–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–∞–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
4. **Context** (`Tree`):
    - –°–æ–¥–µ—Ä–∂–∏—Ç **–≤–Ω–µ—à–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞)
5. **Client** (`ForestDemo`):
    - –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª–µ–≥–∫–æ–≤–µ—Å–∞–º–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–í –ø—Ä–∏–º–µ—Ä–µ —Å –¥–µ—Ä–µ–≤—å—è–º–∏:
- `TreeType` —Ö—Ä–∞–Ω–∏—Ç –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ (—Ç–∏–ø, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä—É)
- `Tree` —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –≤–æ–∑—Ä–∞—Å—Ç
- –§–∞–±—Ä–∏–∫–∞ `TreeFactory` –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã

**–í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–∏–ø –¥–µ—Ä–µ–≤–∞: –°–æ—Å–Ω–∞_–ó–µ–ª–µ–Ω—ã–π_–ò–≥–æ–ª–∫–∏
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–∏–ø –¥–µ—Ä–µ–≤–∞: –î—É–±_–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π_–ö–æ—Ä–∞
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–∏–ø –¥–µ—Ä–µ–≤–∞: –ë–µ—Ä–µ–∑–∞_–ë–µ–ª—ã–π_–õ–∏—Å—Ç—å—è

–†–∏—Å—É–µ–º –°–æ—Å–Ω–∞ –¥–µ—Ä–µ–≤–æ [–¶–≤–µ—Ç: –ó–µ–ª–µ–Ω—ã–π, –¢–µ–∫—Å—Ç—É—Ä–∞: –ò–≥–æ–ª–∫–∏] –≤ (10, 20), –í–æ–∑—Ä–∞—Å—Ç: 5 –ª–µ—Ç
–†–∏—Å—É–µ–º –î—É–± –¥–µ—Ä–µ–≤–æ [–¶–≤–µ—Ç: –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π, –¢–µ–∫—Å—Ç—É—Ä–∞: –ö–æ—Ä–∞] –≤ (30, 40), –í–æ–∑—Ä–∞—Å—Ç: 7 –ª–µ—Ç
–†–∏—Å—É–µ–º –°–æ—Å–Ω–∞ –¥–µ—Ä–µ–≤–æ [–¶–≤–µ—Ç: –ó–µ–ª–µ–Ω—ã–π, –¢–µ–∫—Å—Ç—É—Ä–∞: –ò–≥–æ–ª–∫–∏] –≤ (50, 60), –í–æ–∑—Ä–∞—Å—Ç: 3 –ª–µ—Ç
–†–∏—Å—É–µ–º –ë–µ—Ä–µ–∑–∞ –¥–µ—Ä–µ–≤–æ [–¶–≤–µ—Ç: –ë–µ–ª—ã–π, –¢–µ–∫—Å—Ç—É—Ä–∞: –õ–∏—Å—Ç—å—è] –≤ (70, 80), –í–æ–∑—Ä–∞—Å—Ç: 10 –ª–µ—Ç

–í—Å–µ–≥–æ —Ç–∏–ø–æ–≤ –¥–µ—Ä–µ–≤—å–µ–≤: 3
–í—Å–µ–≥–æ –¥–µ—Ä–µ–≤—å–µ–≤: 4
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- üîΩ **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚ö° **–ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ GC
- üß© **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- üß† **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ/–≤–Ω–µ—à–Ω–µ–µ
- ‚è≥ **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã**: –ü–æ–∏—Å–∫ –≤ —Ñ–∞–±—Ä–∏–∫–µ –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
- –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –æ–±—â–∏–µ —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã:
    - –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã (—Å–∏–º–≤–æ–ª—ã —Å –æ–±—â–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
    - –ò–≥—Ä–æ–≤—ã–µ –¥–≤–∏–∂–∫–∏ (—á–∞—Å—Ç–∏—Ü—ã, –¥–µ—Ä–µ–≤—å—è, –∑–¥–∞–Ω–∏—è)
    - –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã)