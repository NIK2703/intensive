# Паттерн Посетитель (Visitor)

## Назначение
Паттерн **Посетитель** позволяет добавлять новые операции к объектам, не изменяя их классов. Он разделяет алгоритмы и структуры данных, что упрощает добавление функциональности для разнородных объектов (например, экспорт, валидация, сериализация).

## Структура

1. **`Visitor`** (Интерфейс посетителя):
    - Объявляет методы `visit` для каждого типа элемента (например, `visit(Document)`, `visit(Image)`).

2. **`ConcreteVisitor`** (Конкретные посетители):
    - Реализуют методы `visit`, определяя логику операций для каждого элемента (например, `ExportVisitor`, `SendVisitor`).

3. **`Element`** (Интерфейс элемента):
    - Определяет метод `accept(Visitor visitor)`, который вызывает `visitor.visit(this)`.

4. **`ConcreteElement`** (Конкретные элементы):
    - Реализуют метод `accept`, передавая управление соответствующему методу посетителя (например, `Document`, `Image`).

## Преимущества
- **Добавление операций без изменения классов**: Новые операции вводятся через посетителей.
- **Инкапсуляция логики**: Алгоритмы группируются в отдельных классах.
- **Обход сложных структур**: Удобно для работы с деревьями или коллекциями объектов разных типов.

## Недостатки
- **Сложность добавления новых элементов**: При изменении иерархии элементов нужно обновлять всех посетителей.
- **Нарушение инкапсуляции**: Посетитель может получить доступ к приватным полям элементов.

## Когда использовать?
- Есть много разнородных операций над объектами.
- Операции не должны «засорять» классы элементов.
- Структура элементов стабильна, но операции часто расширяются.

## Примеры применения
- **Экспорт данных**: Для разных типов файлов (PDF, PNG) используются отдельные посетители.
- **Анализ кода**: Посетители для проверки синтаксиса, поиска ошибок в AST (Abstract Syntax Tree).
- **Рендеринг GUI**: Отрисовка элементов интерфейса (кнопки, поля ввода) через посетителей.